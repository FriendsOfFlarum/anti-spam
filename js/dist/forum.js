(()=>{var t={n:e=>{var a=e&&e.__esModule?()=>e.default:()=>e;return t.d(a,{a}),a},d:(e,a)=>{for(var o in a)t.o(a,o)&&!t.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:a[o]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r:t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},e={};(()=>{"use strict";t.r(e),t.d(e,{extend:()=>P});const a=flarum.core.compat["forum/app"];var o=t.n(a);const s=flarum.core.compat["common/extend"],r=flarum.core.compat["common/components/Button"];var n=t.n(r);const i=flarum.core.compat["forum/utils/UserControls"];var l=t.n(i);function u(t,e){return u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},u(t,e)}function c(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,u(t,e)}const p=flarum.core.compat["common/components/Modal"];var d=t.n(p);const f=flarum.core.compat["common/components/Switch"];var h=t.n(f),_=function(t){function e(){for(var e,a=arguments.length,o=new Array(a),s=0;s<a;s++)o[s]=arguments[s];return(e=t.call.apply(t,[this].concat(o))||this).user=void 0,e.hardDeleteUser=void 0,e.hardDeleteDiscussions=void 0,e.hardDeletePosts=void 0,e.moveDiscussionsToQuarantine=void 0,e.reportToSfs=void 0,e}c(e,t);var a=e.prototype;return a.oninit=function(e){t.prototype.oninit.call(this,e),this.user=this.attrs.user;var a=o().forum.attribute("fof-anti-spam")["default-options"];this.hardDeleteUser=a.deleteUser,this.hardDeleteDiscussions=a.deleteDiscussions,this.hardDeletePosts=a.deletePosts,this.moveDiscussionsToQuarantine=a.spamQuarantine,this.reportToSfs=a.reportToSfs},a.className=function(){return"HandleSpammerModal Modal--medium"},a.title=function(){return o().translator.trans("fof-anti-spam.forum.spammer_modal.title",{username:this.user.displayName()})},a.content=function(){var t=this,e=o().initializers.has("flarum-tags"),a=!!o().forum.attribute("fof-anti-spam").stopforumspam.enabled;return m("div",{className:"Modal-body"},m("div",{className:"Form"},m("p",{className:"helpText"},o().translator.trans("fof-anti-spam.forum.spammer_modal.intro")),m("div",{className:"Form-group"},m(h(),{state:this.hardDeleteDiscussions,onchange:function(e){t.hardDeleteDiscussions=e,m.redraw()}},o().translator.trans("fof-anti-spam.forum.spammer_modal.hard_delete_discussions_label")),m("p",{className:"helpText"},o().translator.trans("fof-anti-spam.forum.spammer_modal.hard_delete_discussions_help"))),m("div",{className:"Form-group"},m(h(),{state:this.hardDeletePosts,onchange:function(e){t.hardDeletePosts=e}},o().translator.trans("fof-anti-spam.forum.spammer_modal.hard_delete_posts_label")),m("p",{className:"helpText"},o().translator.trans("fof-anti-spam.forum.spammer_modal.hard_delete_posts_help"))),e&&!this.hardDeleteDiscussions&&m("div",{className:"Form-group"},m(h(),{state:this.moveDiscussionsToQuarantine,onchange:function(e){t.moveDiscussionsToQuarantine=e}},o().translator.trans("fof-anti-spam.forum.spammer_modal.move_discussions_tag_label")),m("p",{className:"helpText"},o().translator.trans("fof-anti-spam.forum.spammer_modal.move_discussions_tag_help"))),m("div",{className:"Form-group"},m(h(),{state:this.hardDeleteUser,onchange:function(e){t.hardDeleteUser=e}},o().translator.trans("fof-anti-spam.forum.spammer_modal.hard_delete_user_label")),m("p",{className:"helpText"},o().translator.trans("fof-anti-spam.forum.spammer_modal.hard_delete_user_help"))),a&&m("div",{className:"Form-group"},m(h(),{state:this.reportToSfs,onchange:function(e){t.reportToSfs=e}},o().translator.trans("fof-anti-spam.forum.spammer_modal.report_to_sfs_label")),m("p",{className:"helpText"},o().translator.trans("fof-anti-spam.forum.spammer_modal.report_to_sfs_help"))),m("div",{className:"Form-group"},m(n(),{className:"Button Button--primary",onclick:function(){return t.submitData()},loading:this.loading,disabled:this.loading},o().translator.trans("fof-anti-spam.forum.spammer_modal.process_button")))))},a.submitData=function(){var t=this;this.loading=!0;var e={options:{deletePosts:this.hardDeletePosts,deleteDiscussions:this.hardDeleteDiscussions,deleteUser:this.hardDeleteUser,moveDiscussionsToQuarantine:this.moveDiscussionsToQuarantine,reportToSfs:this.reportToSfs}};o().request({method:"POST",url:o().forum.attribute("apiUrl")+"/users/"+this.user.id()+"/spamblock",body:e}).then((function(){t.loading=!1,t.hide()}))},e}(d());const v=flarum.core.compat["common/extenders"];var b=t.n(v);const D=flarum.core.compat["common/models/User"];var g=t.n(D);const y=flarum.core.compat["common/Model"];var T=t.n(y),S=function(t){function e(){return t.apply(this,arguments)||this}c(e,t);var a=e.prototype;return a.ip=function(){return T().attribute("ip").call(this)},a.email=function(){return T().attribute("email").call(this)},a.username=function(){return T().attribute("username").call(this)},a.sfsData=function(){return T().attribute("sfsData").call(this)},a.provider=function(){return T().attribute("provider").call(this)},a.providerData=function(){return T().attribute("providerData").call(this)},a.attemptedAt=function(){return T().attribute("attemptedAt",T().transformDate).call(this)},e}(T());const N=[(new(b().Store)).add("blocked-registrations",S)],P=[].concat(N,[new(b().Model)(g()).attribute("canSpamblock")]);o().initializers.add("fof/anti-spam",(function(){(0,s.extend)(l(),"moderationControls",(function(t,e){e.canSpamblock()&&t.add("spammer",m(n(),{icon:"fas fa-pastafarianism",onclick:function(){o().modal.show(_,{user:e})}},o().translator.trans("fof-anti-spam.forum.user_controls.spammer_button")))}))}))})(),module.exports=e})();
//# sourceMappingURL=forum.js.map