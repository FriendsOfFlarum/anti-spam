(()=>{var t={n:e=>{var s=e&&e.__esModule?()=>e.default:()=>e;return t.d(s,{a:s}),s},d:(e,s)=>{for(var o in s)t.o(s,o)&&!t.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:s[o]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r:t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},e={};(()=>{"use strict";t.r(e),t.d(e,{extend:()=>g});const s=flarum.core.compat["forum/app"];var o=t.n(s);const a=flarum.core.compat["common/extend"],r=flarum.core.compat["common/components/Button"];var n=t.n(r);const i=flarum.core.compat["forum/utils/UserControls"];var l=t.n(i);function u(t,e){return u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},u(t,e)}const c=flarum.core.compat["common/components/Modal"];var p=t.n(c);const d=flarum.core.compat["common/components/Switch"];var f=t.n(d),h=function(t){var e,s;function a(){for(var e,s=arguments.length,o=new Array(s),a=0;a<s;a++)o[a]=arguments[a];return(e=t.call.apply(t,[this].concat(o))||this).user=void 0,e.hardDeleteUser=void 0,e.hardDeleteDiscussions=void 0,e.hardDeletePosts=void 0,e.moveDiscussionsToQuarantine=void 0,e.reportToSfs=void 0,e}s=t,(e=a).prototype=Object.create(s.prototype),e.prototype.constructor=e,u(e,s);var r=a.prototype;return r.oninit=function(e){t.prototype.oninit.call(this,e),this.user=this.attrs.user;var s=o().forum.attribute("fof-anti-spam")["default-options"];this.hardDeleteUser=s.deleteUser,this.hardDeleteDiscussions=s.deleteDiscussions,this.hardDeletePosts=s.deletePosts,this.moveDiscussionsToQuarantine=s.spamQuarantine,this.reportToSfs=s.reportToSfs},r.className=function(){return"HandleSpammerModal Modal--medium"},r.title=function(){return o().translator.trans("fof-anti-spam.forum.spammer_modal.title",{username:this.user.username()})},r.content=function(){var t=this,e=o().initializers.has("flarum-tags"),s=!!o().forum.attribute("fof-anti-spam").stopforumspam.enabled;return m("div",{className:"Modal-body"},m("div",{className:"Form"},m("p",{className:"helpText"},o().translator.trans("fof-anti-spam.forum.spammer_modal.intro")),m("div",{className:"Form-group"},m(f(),{state:this.hardDeleteDiscussions,onchange:function(e){t.hardDeleteDiscussions=e,m.redraw()}},o().translator.trans("fof-anti-spam.forum.spammer_modal.hard_delete_discussions_label")),m("p",{className:"helpText"},o().translator.trans("fof-anti-spam.forum.spammer_modal.hard_delete_discussions_help"))),m("div",{className:"Form-group"},m(f(),{state:this.hardDeletePosts,onchange:function(e){t.hardDeletePosts=e}},o().translator.trans("fof-anti-spam.forum.spammer_modal.hard_delete_posts_label")),m("p",{className:"helpText"},o().translator.trans("fof-anti-spam.forum.spammer_modal.hard_delete_posts_help"))),e&&!this.hardDeleteDiscussions&&m("div",{className:"Form-group"},m(f(),{state:this.moveDiscussionsToQuarantine,onchange:function(e){t.moveDiscussionsToQuarantine=e}},o().translator.trans("fof-anti-spam.forum.spammer_modal.move_discussions_tag_label")),m("p",{className:"helpText"},o().translator.trans("fof-anti-spam.forum.spammer_modal.move_discussions_tag_help"))),m("div",{className:"Form-group"},m(f(),{state:this.hardDeleteUser,onchange:function(e){t.hardDeleteUser=e}},o().translator.trans("fof-anti-spam.forum.spammer_modal.hard_delete_user_label")),m("p",{className:"helpText"},o().translator.trans("fof-anti-spam.forum.spammer_modal.hard_delete_user_help"))),s&&m("div",{className:"Form-group"},m(f(),{state:this.reportToSfs,onchange:function(e){t.reportToSfs=e}},o().translator.trans("fof-anti-spam.forum.spammer_modal.report_to_sfs_label")),m("p",{className:"helpText"},o().translator.trans("fof-anti-spam.forum.spammer_modal.report_to_sfs_help"))),m("div",{className:"Form-group"},m(n(),{className:"Button Button--primary",onclick:function(){return t.submitData()},loading:this.loading,disabled:this.loading},o().translator.trans("fof-anti-spam.forum.spammer_modal.process_button")))))},r.submitData=function(){var t=this;this.loading=!0;var e={options:{hardDeletePosts:this.hardDeletePosts,hardDeleteDiscussions:this.hardDeleteDiscussions,hardDeleteUser:this.hardDeleteUser,moveDiscussionsToQuarantine:this.moveDiscussionsToQuarantine,reportToSfs:this.reportToSfs}};o().request({method:"POST",url:o().forum.attribute("apiUrl")+"/users/"+this.user.id()+"/spamblock",body:e}).then((function(){t.loading=!1,t.hide()}))},a}(p());const _=flarum.core.compat["common/extenders"];var v=t.n(_);const D=flarum.core.compat["common/models/User"];var b=t.n(D);const g=[new(v().Model)(b()).attribute("canSpamblock")];o().initializers.add("fof/anti-spam",(function(){(0,a.extend)(l(),"moderationControls",(function(t,e){e.canSpamblock()&&t.add("spammer",m(n(),{icon:"fas fa-pastafarianism",onclick:function(){o().modal.show(h,{user:e})}},o().translator.trans("fof-anti-spam.forum.user_controls.spammer_button")))}))}))})(),module.exports=e})();
//# sourceMappingURL=forum.js.map