{"version":3,"file":"admin.js","mappings":"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","sources":["webpack://@fof/anti-spam/webpack/bootstrap","webpack://@fof/anti-spam/webpack/runtime/compat get default export","webpack://@fof/anti-spam/webpack/runtime/define property getters","webpack://@fof/anti-spam/webpack/runtime/hasOwnProperty shorthand","webpack://@fof/anti-spam/webpack/runtime/make namespace object","webpack://@fof/anti-spam/external root \"flarum.reg.get('core', 'admin/app')\"","webpack://@fof/anti-spam/external root \"flarum.reg.get('core', 'common/extenders')\"","webpack://@fof/anti-spam/external root \"flarum.reg.get('core', 'common/Model')\"","webpack://@fof/anti-spam/./src/common/models/BlockedRegistration.tsx","webpack://@fof/anti-spam/./src/common/extend.ts","webpack://@fof/anti-spam/./node_modules/@babel/runtime/helpers/esm/typeof.js","webpack://@fof/anti-spam/./node_modules/@babel/runtime/helpers/esm/defineProperty.js","webpack://@fof/anti-spam/./node_modules/@babel/runtime/helpers/esm/toPropertyKey.js","webpack://@fof/anti-spam/./node_modules/@babel/runtime/helpers/esm/toPrimitive.js","webpack://@fof/anti-spam/external root \"flarum.reg.get('core', 'common/components/Form')\"","webpack://@fof/anti-spam/external root \"flarum.reg.get('core', 'admin/components/ExtensionPage')\"","webpack://@fof/anti-spam/external root \"flarum.reg.get('core', 'common/components/Button')\"","webpack://@fof/anti-spam/external root \"flarum.reg.get('core', 'common/components/Link')\"","webpack://@fof/anti-spam/external root \"flarum.reg.get('core', 'common/components/LoadingIndicator')\"","webpack://@fof/anti-spam/external root \"flarum.reg.get('core', 'common/utils/ItemList')\"","webpack://@fof/anti-spam/external root \"flarum.reg.get('core', 'common/helpers/fullTime')\"","webpack://@fof/anti-spam/external root \"flarum.reg.get('core', 'common/components/IPAddress')\"","webpack://@fof/anti-spam/./src/admin/components/AntiSpamSettingsPage.tsx","webpack://@fof/anti-spam/./src/admin/extend.ts","webpack://@fof/anti-spam/./src/admin/index.ts"],"sourcesContent":["// The require scope\nvar __webpack_require__ = {};\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'admin/app');","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'common/extenders');","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'common/Model');","import Model from 'flarum/common/Model';\nexport default class BlockedRegistration extends Model {\n  ip() {\n    return Model.attribute('ip').call(this);\n  }\n  email() {\n    return Model.attribute('email').call(this);\n  }\n  username() {\n    return Model.attribute('username').call(this);\n  }\n  sfsData() {\n    return Model.attribute('sfsData').call(this);\n  }\n  provider() {\n    return Model.attribute('provider').call(this);\n  }\n  providerData() {\n    return Model.attribute('providerData').call(this);\n  }\n  attemptedAt() {\n    return Model.attribute('attemptedAt', Model.transformDate).call(this);\n  }\n}\nflarum.reg.add('fof-anti-spam', 'common/models/BlockedRegistration', BlockedRegistration);","import Extend from 'flarum/common/extenders';\nimport BlockedRegistration from './models/BlockedRegistration';\nexport default [new Extend.Store() //\n.add('blocked-registrations', BlockedRegistration)];","function _typeof(o) {\n  \"@babel/helpers - typeof\";\n\n  return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) {\n    return typeof o;\n  } : function (o) {\n    return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o;\n  }, _typeof(o);\n}\nexport { _typeof as default };","import toPropertyKey from \"./toPropertyKey.js\";\nfunction _defineProperty(e, r, t) {\n  return (r = toPropertyKey(r)) in e ? Object.defineProperty(e, r, {\n    value: t,\n    enumerable: !0,\n    configurable: !0,\n    writable: !0\n  }) : e[r] = t, e;\n}\nexport { _defineProperty as default };","import _typeof from \"./typeof.js\";\nimport toPrimitive from \"./toPrimitive.js\";\nfunction toPropertyKey(t) {\n  var i = toPrimitive(t, \"string\");\n  return \"symbol\" == _typeof(i) ? i : i + \"\";\n}\nexport { toPropertyKey as default };","import _typeof from \"./typeof.js\";\nfunction toPrimitive(t, r) {\n  if (\"object\" != _typeof(t) || !t) return t;\n  var e = t[Symbol.toPrimitive];\n  if (void 0 !== e) {\n    var i = e.call(t, r || \"default\");\n    if (\"object\" != _typeof(i)) return i;\n    throw new TypeError(\"@@toPrimitive must return a primitive value.\");\n  }\n  return (\"string\" === r ? String : Number)(t);\n}\nexport { toPrimitive as default };","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'common/components/Form');","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'admin/components/ExtensionPage');","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'common/components/Button');","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'common/components/Link');","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'common/components/LoadingIndicator');","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'common/utils/ItemList');","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'common/helpers/fullTime');","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'common/components/IPAddress');","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport Form from 'flarum/common/components/Form';\nimport app from 'flarum/admin/app';\nimport ExtensionPage from 'flarum/admin/components/ExtensionPage';\nimport Button from 'flarum/common/components/Button';\nimport Link from 'flarum/common/components/Link';\nimport LoadingIndicator from 'flarum/common/components/LoadingIndicator';\nimport ItemList from 'flarum/common/utils/ItemList';\nimport fullTime from 'flarum/common/helpers/fullTime';\nimport IPAddress from 'flarum/common/components/IPAddress';\nexport default class AntiSpamSettingsPage extends ExtensionPage {\n  constructor() {\n    super(...arguments);\n    _defineProperty(this, \"page\", void 0);\n    _defineProperty(this, \"blockedLoading\", false);\n    _defineProperty(this, \"blockedRegistrations\", null);\n    _defineProperty(this, \"currentPage\", 1);\n    _defineProperty(this, \"totalPages\", 1);\n  }\n  oninit(vnode) {\n    super.oninit(vnode);\n    this.page = 'settings';\n  }\n  content() {\n    return m(\"div\", {\n      className: \"FoFAntiSpamSettings\"\n    }, m(\"div\", {\n      className: \"container\"\n    }, this.menuButtons(), this.page === 'settings' && this.settingsContent(), this.page === 'blocked-registrations' && this.blockedRegistrationsContent()));\n  }\n  menuButtons() {\n    return m(\"div\", {\n      className: \"MenuButtons\"\n    }, m(Button, {\n      className: \"Button \".concat(this.page === 'settings' ? 'active' : ''),\n      icon: \"fas fa-cog\",\n      onclick: () => this.setPage('settings')\n    }, app.translator.trans('fof-anti-spam.admin.settings.button')), m(Button, {\n      className: \"Button \".concat(this.page === 'blocked-registrations' ? 'active' : ''),\n      icon: \"fas fa-ban\",\n      onclick: () => this.setPage('blocked-registrations')\n    }, app.translator.trans('fof-anti-spam.admin.blocked_registrations.button')));\n  }\n  setPage(page) {\n    this.page = page;\n    if (page === 'blocked-registrations' && !this.blockedRegistrations) {\n      this.loadData();\n    } else {\n      m.redraw();\n    }\n  }\n  settingsContent() {\n    const apiRegions = ['closest', 'europe', 'us'];\n    const tagsEnabled = app.initializers.has('flarum-tags');\n    return m(\"div\", {\n      className: \"FoFAntiSpamSettings--settings\"\n    }, m(Form, null, m(\"div\", {\n      className: \"Section Section--defaultActions\"\n    }, m(\"h3\", null, app.translator.trans('fof-anti-spam.admin.settings.default-actions.heading')), m(\"p\", {\n      className: \"helpText\"\n    }, app.translator.trans('fof-anti-spam.admin.settings.default-actions.introduction')), this.buildSettingComponent({\n      type: 'boolean',\n      setting: 'fof-anti-spam.actions.deleteUser',\n      label: app.translator.trans('fof-anti-spam.admin.settings.default-actions.delete_user_label'),\n      help: app.translator.trans('fof-anti-spam.admin.settings.default-actions.delete_user_help')\n    }), this.buildSettingComponent({\n      type: 'boolean',\n      setting: 'fof-anti-spam.actions.deletePosts',\n      label: app.translator.trans('fof-anti-spam.admin.settings.default-actions.delete_posts_label'),\n      help: app.translator.trans('fof-anti-spam.admin.settings.default-actions.delete_posts_help')\n    }), this.buildSettingComponent({\n      type: 'boolean',\n      setting: 'fof-anti-spam.actions.deleteDiscussions',\n      label: app.translator.trans('fof-anti-spam.admin.settings.default-actions.delete_discussions_label'),\n      help: app.translator.trans('fof-anti-spam.admin.settings.default-actions.delete_discussions_help')\n    }), tagsEnabled && this.buildSettingComponent({\n      type: 'flarum-tags.select-tags',\n      setting: 'fof-anti-spam.actions.moveDiscussionsToTags',\n      label: app.translator.trans('fof-anti-spam.admin.settings.default-actions.move_discussions_to_tags_label'),\n      help: app.translator.trans('fof-anti-spam.admin.settings.default-actions.move_discussions_to_tags_help'),\n      options: {\n        requireParentTag: true,\n        limits: {\n          max: {\n            primary: 1\n          },\n          min: {\n            primary: 1\n          }\n        }\n      }\n    })), m(\"div\", {\n      className: \"Section Section--stopforumspam\"\n    }, m(\"h3\", null, \"StopForumSpam\"), m(\"div\", {\n      className: \"Introduction\"\n    }, m(\"p\", {\n      className: \"helpText\"\n    }, app.translator.trans('fof-anti-spam.admin.settings.stopforumspam.introduction', {\n      a: m(Link, {\n        href: \"https://stopforumspam.com\",\n        target: \"_blank\",\n        external: true\n      })\n    }))), this.buildSettingComponent({\n      type: 'select',\n      setting: 'fof-anti-spam.regionalEndpoint',\n      options: apiRegions.reduce((o, p) => {\n        o[p] = app.translator.trans(\"fof-anti-spam.admin.settings.stopforumspam.region_\".concat(p, \"_label\"));\n        return o;\n      }, {}),\n      label: app.translator.trans('fof-anti-spam.admin.settings.stopforumspam.regional_endpoint_label'),\n      help: app.translator.trans('fof-anti-spam.admin.settings.stopforumspam.regional_endpoint_help'),\n      default: 'closest'\n    }), this.buildSettingComponent({\n      type: 'boolean',\n      setting: 'fof-anti-spam.sfs-lookup',\n      label: app.translator.trans('fof-anti-spam.admin.settings.stopforumspam.sfs_lookup_label'),\n      help: app.translator.trans('fof-anti-spam.admin.settings.stopforumspam.sfs_lookup_help')\n    }), this.buildSettingComponent({\n      type: 'boolean',\n      setting: 'fof-anti-spam.report_blocked_registrations',\n      label: app.translator.trans('fof-anti-spam.admin.settings.stopforumspam.report_blocked_registrations_label'),\n      help: app.translator.trans('fof-anti-spam.admin.settings.stopforumspam.report_blocked_registrations_help')\n    }), this.buildSettingComponent({\n      type: 'boolean',\n      setting: 'fof-anti-spam.username',\n      label: app.translator.trans('fof-anti-spam.admin.settings.stopforumspam.username_label')\n    }), this.buildSettingComponent({\n      type: 'boolean',\n      setting: 'fof-anti-spam.ip',\n      label: app.translator.trans('fof-anti-spam.admin.settings.stopforumspam.ip_label')\n    }), this.buildSettingComponent({\n      type: 'boolean',\n      setting: 'fof-anti-spam.email',\n      label: app.translator.trans('fof-anti-spam.admin.settings.stopforumspam.email_label')\n    }), this.buildSettingComponent({\n      type: 'boolean',\n      setting: 'fof-anti-spam.emailhash',\n      label: app.translator.trans('fof-anti-spam.admin.settings.stopforumspam.email_hash_label'),\n      help: app.translator.trans('fof-anti-spam.admin.settings.stopforumspam.email_hash_help')\n    }), this.buildSettingComponent({\n      type: 'boolean',\n      setting: 'fof-anti-spam.blockTorExitNodes',\n      label: app.translator.trans('fof-anti-spam.admin.settings.stopforumspam.block_tor_exit_nodes_label'),\n      help: app.translator.trans('fof-anti-spam.admin.settings.stopforumspam.block_tor_exit_nodes_help')\n    }), this.buildSettingComponent({\n      type: 'number',\n      setting: 'fof-anti-spam.frequency',\n      label: app.translator.trans('fof-anti-spam.admin.settings.stopforumspam.frequency_label'),\n      help: app.translator.trans('fof-anti-spam.admin.settings.stopforumspam.frequency_help'),\n      placeholder: '5',\n      required: true\n    }), this.buildSettingComponent({\n      type: 'number',\n      setting: 'fof-anti-spam.confidence',\n      label: app.translator.trans('fof-anti-spam.admin.settings.stopforumspam.confidence_label'),\n      help: app.translator.trans('fof-anti-spam.admin.settings.stopforumspam.confidence_help'),\n      min: 0,\n      max: 100,\n      placeholder: '50.0',\n      required: true\n    }), m(\"p\", {\n      className: \"helpText\"\n    }, app.translator.trans('fof-anti-spam.admin.settings.stopforumspam.api_key_text')), this.buildSettingComponent({\n      type: 'string',\n      setting: 'fof-anti-spam.api_key',\n      label: app.translator.trans('fof-anti-spam.admin.settings.stopforumspam.api_key_label'),\n      help: app.translator.trans('fof-anti-spam.admin.settings.stopforumspam.api_key_instructions_text', {\n        register: m(\"a\", {\n          href: \"https://www.stopforumspam.com/forum/register.php\"\n        }),\n        key: m(\"a\", {\n          href: \"https://www.stopforumspam.com/keys\"\n        })\n      })\n    })), m(\"hr\", null), this.submitButton()));\n  }\n  blockedRegistrationsContent() {\n    return m(\"div\", {\n      className: \"FoFAntiSpamSettings--blockedRegistrations\"\n    }, m(Form, null, m(\"h3\", null, app.translator.trans('fof-anti-spam.admin.blocked_registrations.title')), this.blockedLoading && m(LoadingIndicator, null), !this.blockedLoading && this.blockedRegistrations && this.blockedRegistrations.length === 0 && m(\"div\", null, m(\"p\", null, app.translator.trans('fof-anti-spam.admin.blocked_registrations.no-records'))), !this.blockedLoading && this.blockedRegistrations && this.blockedRegistrations.length > 0 && m(\"div\", null, m(\"p\", {\n      className: \"helpText\"\n    }, app.translator.trans('fof-anti-spam.admin.blocked_registrations.help')), m(\"div\", {\n      className: \"BlockedRegistrations--list\"\n    }, this.blockedRegistrations.map(blockedRegistration => {\n      return m(\"div\", {\n        className: \"BlockedRegistrations--item\"\n      }, m(\"div\", {\n        className: \"BlockedRegistrations-item--details\"\n      }, this.detailItems(blockedRegistration).toArray()), m(\"div\", {\n        className: \"BlockedRegistrations-item--actions\"\n      }, this.actionItems(blockedRegistration).toArray()));\n    })), this.renderPagination())));\n  }\n  async loadData(page) {\n    if (page === void 0) {\n      page = 1;\n    }\n    this.blockedLoading = true;\n    m.redraw();\n    try {\n      const response = await app.store.find('blocked-registrations', {\n        page: {\n          offset: (page - 1) * AntiSpamSettingsPage.ITEMS_PER_PAGE,\n          limit: AntiSpamSettingsPage.ITEMS_PER_PAGE\n        }\n      });\n      this.blockedRegistrations = response;\n\n      // Calculate total pages from response\n      // If we get a full page of results, there might be more pages\n      // This is a simplified approach - you may want to use meta data from the API response if available\n      const hasNextPage = response.length === AntiSpamSettingsPage.ITEMS_PER_PAGE;\n      this.totalPages = hasNextPage ? page + 1 : page;\n    } catch (error) {\n      console.error(error);\n      this.blockedRegistrations = [];\n    }\n    this.blockedLoading = false;\n    this.currentPage = page;\n    m.redraw();\n  }\n  renderPagination() {\n    return m(\"nav\", {\n      className: \"BlockedRegistrations--pagination\"\n    }, m(Button, {\n      className: \"Button\",\n      disabled: this.currentPage <= 1,\n      onclick: () => this.loadData(this.currentPage - 1)\n    }, \"Previous\"), m(\"span\", null, \"Page \", this.currentPage, \" of \", this.totalPages), m(Button, {\n      className: \"Button\",\n      disabled: this.currentPage >= this.totalPages,\n      onclick: () => this.loadData(this.currentPage + 1)\n    }, \"Next\"));\n  }\n  detailItems(blockedRegistration) {\n    var _blockedRegistration$;\n    const items = new ItemList();\n    items.add('attemptedAt', m(\"div\", {\n      className: \"BlockedRegistrations-item--details\"\n    }, m(\"span\", {\n      className: \"BlockedRegistrations-label\"\n    }, app.translator.trans('fof-anti-spam.admin.blocked_registrations.attempted-at')), m(\"span\", {\n      className: \"BlockedRegistrations-value\"\n    }, fullTime((_blockedRegistration$ = blockedRegistration.attemptedAt()) != null ? _blockedRegistration$ : new Date()))), 100);\n    items.add('ip', m(\"div\", {\n      className: \"BlockedRegistrations-item--details\"\n    }, m(\"span\", {\n      className: \"BlockedRegistrations-label\"\n    }, app.translator.trans('fof-anti-spam.admin.blocked_registrations.ip')), m(\"span\", {\n      className: \"BlockedRegistrations-value\"\n    }, m(IPAddress, {\n      ip: blockedRegistration.ip()\n    }))), 90);\n    items.add('email', m(\"div\", {\n      className: \"BlockedRegistrations-item--details\"\n    }, m(\"span\", {\n      className: \"BlockedRegistrations-label\"\n    }, app.translator.trans('fof-anti-spam.admin.blocked_registrations.email')), m(\"span\", {\n      className: \"BlockedRegistrations-value\"\n    }, blockedRegistration.email())), 80);\n    items.add('username', m(\"div\", {\n      className: \"BlockedRegistrations-item--details\"\n    }, m(\"span\", {\n      className: \"BlockedRegistrations-label\"\n    }, app.translator.trans('fof-anti-spam.admin.blocked_registrations.username')), m(\"span\", {\n      className: \"BlockedRegistrations-value\"\n    }, blockedRegistration.username())), 70);\n    if (blockedRegistration.provider()) {\n      items.add('provider', m(\"div\", {\n        className: \"BlockedRegistrations-item--details\"\n      }, m(\"span\", {\n        className: \"BlockedRegistrations-label\"\n      }, app.translator.trans('fof-anti-spam.admin.blocked_registrations.login-provider')), m(\"span\", {\n        className: \"BlockedRegistrations-value\"\n      }, m(\"code\", null, blockedRegistration.provider()))), 60);\n    }\n    if (blockedRegistration.providerData()) {\n      items.add('providerData', m(\"div\", {\n        className: \"BlockedRegistrations-item--details\"\n      }, m(\"span\", {\n        className: \"BlockedRegistrations-label\"\n      }, app.translator.trans('fof-anti-spam.admin.blocked_registrations.login-provider-data')), m(\"span\", {\n        className: \"BlockedRegistrations-value\"\n      }, m(\"code\", null, blockedRegistration.providerData()))), 50);\n    }\n    items.add('sfsData', m(\"div\", {\n      className: \"BlockedRegistrations-item--details\"\n    }, m(\"span\", {\n      className: \"BlockedRegistrations-label\"\n    }, app.translator.trans('fof-anti-spam.admin.blocked_registrations.sfs-data')), m(\"span\", {\n      className: \"BlockedRegistrations-value\"\n    }, m(\"code\", null, blockedRegistration.sfsData()))), 20);\n    return items;\n  }\n  actionItems(blockedRegistration) {\n    const items = new ItemList();\n    items.add('delete', m(Button, {\n      className: \"Button Button--danger\",\n      icon: \"fas fa-trash\",\n      onclick: () => {\n        var _this$blockedRegistra;\n        blockedRegistration.delete();\n        this.blockedRegistrations = (_this$blockedRegistra = this.blockedRegistrations) == null ? void 0 : _this$blockedRegistra.filter(b => b.id() !== blockedRegistration.id());\n        m.redraw();\n      }\n    }, app.translator.trans('fof-anti-spam.admin.blocked_registrations.delete_entry')));\n    return items;\n  }\n}\n_defineProperty(AntiSpamSettingsPage, \"ITEMS_PER_PAGE\", 20);\nflarum.reg.add('fof-anti-spam', 'admin/components/AntiSpamSettingsPage', AntiSpamSettingsPage);","import app from 'flarum/admin/app';\nimport Extend from 'flarum/common/extenders';\nimport { default as commonExtend } from '../common/extend';\nimport AntiSpamSettingsPage from './components/AntiSpamSettingsPage';\nexport default [...commonExtend, new Extend.Admin() //\n.page(AntiSpamSettingsPage).permission(() => ({\n  icon: 'fas fa-pastafarianism',\n  label: app.translator.trans('fof-anti-spam.admin.permissions.spamblock_users_label'),\n  permission: 'user.spamblock'\n}), 'moderate')];","import app from 'flarum/admin/app';\nexport { default as extend } from './extend';\napp.initializers.add('fof-anti-spam', () => {\n  //\n});"],"names":["__webpack_require__","module","getter","__esModule","d","a","exports","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","Symbol","toStringTag","value","flarum","reg","BlockedRegistration","ip","this","email","username","sfsData","provider","providerData","attemptedAt","add","_typeof","iterator","constructor","_defineProperty","e","r","t","i","toPrimitive","TypeError","String","toPropertyKey","configurable","writable","AntiSpamSettingsPage","super","arguments","oninit","vnode","page","content","m","className","menuButtons","settingsContent","blockedRegistrationsContent","concat","icon","onclick","setPage","trans","blockedRegistrations","redraw","loadData","tagsEnabled","has","buildSettingComponent","type","setting","label","help","options","requireParentTag","limits","max","primary","min","href","target","external","reduce","p","default","placeholder","required","register","submitButton","blockedLoading","length","map","blockedRegistration","detailItems","toArray","actionItems","renderPagination","response","find","offset","ITEMS_PER_PAGE","limit","hasNextPage","totalPages","error","console","currentPage","disabled","_blockedRegistration$","items","Date","_this$blockedRegistra","delete","filter","b","id","permission"],"sourceRoot":""}